{"version":3,"file":"main.browser.js","sources":["../Hioki/index.js","../util/setAuthorizationToken.js","../config/config.js","../persist.js","../index.js"],"sourcesContent":["import axios from 'axios'\nimport cheerio from 'cheerio'\n\n//Data acquisition Hioki\n\nconst acquisition = () => {\n\treturn new Promise((resolve, reject) => {\n\t\taxios.get('http://192.168.0.50/REALDATA.HTM?%3ACOMPORT%3AWEBORGUNIT=UNIT2%3B')\n\t\t.then( res => {\n\t\t  const $ = cheerio.load(res.data)\n\t\t  const table = $('BODY CENTER TABLE[cellspacing=0]').toArray()\n\t\t  const intensityDOM = table[0].children[6].children[4].children[0].children[0].data\n\t\t\tconst battery1DOM = table[0].children[2].children[1].children[0].children[0].data\n\t\t\tconst battery2DOM = table[0].children[2].children[4].children[0].children[0].data\n\t\t\tconst battery3DOM = table[0].children[3].children[1].children[0].children[0].data\n\t\t\tconst battery4DOM = table[0].children[3].children[4].children[0].children[0].data\n\t\t\tconst voltageDOM = table[0].children[4].children[1].children[0].children[0].data\n\t\t\tlet splitVT = voltageDOM.split('V')\n\t\t\tlet splitB1 = battery1DOM.split('V')\n\t\t\tlet splitB2 = battery2DOM.split('V')\n\t\t\tlet splitB3 = battery3DOM.split('V')\n\t\t\tlet splitB4 = battery4DOM.split('V')\n\t\t\tlet splitI = intensityDOM.split('A')\n\t\t  let msm = {\n\t\t    intensity: 1,\n\t\t    voltageTotal: parseFloat(splitVT[0]),\n\t\t\t\tbattery: {\n\t\t\t\t\tbattery1: parseFloat(splitB1),\n\t\t\t\t\tbattery2: parseFloat(splitB2),\n\t\t\t\t\tbattery3: parseFloat(splitB3),\n\t\t\t\t\tbattery4: parseFloat(splitB4)\n\t\t\t\t}\n\t\t  }\n\t\t  resolve({\n\t\t    msm: msm\n\t\t  })\n\t\t})\n\t\t.catch ( err => {\n\t\t  reject({\n\t\t    error: err,\n\t\t  })\n\t\t})\n\t});\n}\n\nexport default acquisition;\n","import axios from 'axios';\n\nexport default function setAuthorizationToken(token){\n  if(token){\n    axios.defaults.headers.common['Authorization'] = token;\n  }\n  else{\n    delete axios.defaults.headers.common['Authorization'];\n  }\n}\n","const id = '594030300b346046243c8525'\nconst password = '123456'\nconst api = 'http://pird.ddns.net:7000/api'\n\nexport { id, password, api }\n","import axios from 'axios'\nimport { id, password, api } from './config/config'\n\nconst persist = (body) => {\n\n  axios.post(`${api}/device/${id}/measurement`, body)\n\t.then( res => {\n    console.log(res.data.data);\n\t})\n\t.catch ( err => {\n\t\tconsole.log(err.response.data)\n\t})\n\n}\n\nexport { persist }\n","import acquisition from './Hioki/index'\nimport axios from 'axios'\nimport setAuthorizationToken from './util/setAuthorizationToken'\nimport { id, password, api } from './config/config'\nimport { persist } from './persist'\n\nconst bodyAuth = {\n  id: id,\n  password: password,\n}\nlet token = ''\n\naxios.post(`${api}/auth/device`,bodyAuth)\n  .then((res) => {\n    token = res.data.token\n    let body = {}\n    setAuthorizationToken(token)\n    setInterval(() => {\n\t       acquisition()\n          .then(({msm}) => {\n            persist(msm)\n          })\n          .catch((err) => {\n            console.log('Error acquisition ' + err.response.data);\n          })\n    }, 6000)\n\n  })\n  .catch((err) => {\n    console.log('Error Login ' + err.response.data);\n  })\n"],"names":["acquisition","Promise","resolve","reject","get","then","$","cheerio","load","res","data","table","toArray","intensityDOM","children","battery1DOM","battery2DOM","battery3DOM","battery4DOM","voltageDOM","splitVT","split","splitB1","splitB2","splitB3","splitB4","splitI","msm","parseFloat","catch","err","setAuthorizationToken","token","defaults","headers","common","axios","id","password","api","persist","body","post","log","response","bodyAuth"],"mappings":"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"}