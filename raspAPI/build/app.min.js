!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("axios"),require("cheerio")):"function"==typeof define&&define.amd?define(["axios","cheerio"],t):t(e.axios,e.cheerio)}(this,function(e,t){"use strict";function n(t){t?e.defaults.headers.common.Authorization=t:delete e.defaults.headers.common.Authorization}e=e&&"default"in e?e.default:e,t=t&&"default"in t?t.default:t;var i=function(){return new Promise(function(n,i){e.get("http://192.168.0.50/REALDATA.HTM?%3ACOMPORT%3AWEBORGUNIT=UNIT2%3B").then(function(e){var i=t.load(e.data)("BODY CENTER TABLE[cellspacing=0]").toArray(),a=i[0].children[6].children[4].children[0].children[0].data,r=i[0].children[2].children[1].children[0].children[0].data,o=i[0].children[2].children[4].children[0].children[0].data,c=i[0].children[3].children[1].children[0].children[0].data,d=i[0].children[3].children[4].children[0].children[0].data,l=i[0].children[4].children[1].children[0].children[0].data.split("V"),s=r.split("V"),h=o.split("V"),u=c.split("V"),f=d.split("V"),p=(a.split("A"),{intensity:1,voltageTotal:parseFloat(l[0]),battery:{battery1:parseFloat(s),battery2:parseFloat(h),battery3:parseFloat(u),battery4:parseFloat(f)}});n({msm:p})}).catch(function(e){i({error:e})})})},a="594030300b346046243c8525",r="http://pird.ddns.net:7000/api",o=function(t){e.post(r+"/device/"+a+"/measurement",t).then(function(e){console.log(e.data.data)}).catch(function(e){console.log(e.response.data)})},c={id:a,password:"123456"},d="";e.post(r+"/auth/device",c).then(function(e){n(d=e.data.token),setInterval(function(){i().then(function(e){var t=e.msm;o(t)}).catch(function(e){console.log("Error acquisition "+e.response.data)})},6e3)}).catch(function(e){console.log("Error Login "+e.response.data)})});
